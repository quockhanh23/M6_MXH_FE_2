<div class="backArrowDiv">
       <span matTooltip="Quay lại"
             [routerLink]="['/user/newsfeed']"
             class="backButton title material-icons a1 a2 backArrowSpan">keyboard_backspace</span>
</div>

<div class="row"
     style="margin-left: 5%; margin-right: 5%; margin-bottom: 10px; background-color: #fcfcfc; border-radius: 5px">
  <div *ngIf="countFriend == 0" class="col-3">
    <div class="row" style="margin-left: 1%">
      <div class="col-8">
        <h2>Bạn không có bạn bè</h2>
        <div style="height: 250px"></div>
        <a style="margin-left: 77px; font-size: 18px" [routerLink]="['/user/requests']">Tìm kiếm bạn bè</a>
      </div>
      <div class="col">
        <h2 style="color: #8c8c8c" class="a1 a2">Người lạ</h2>
      </div>
    </div>
  </div>
  <div *ngIf="countFriend > 0" class="col-3">
    <div class="row" style="margin-left: 1%">
      <div class="col">
        <h2 class="a1 a2">Bạn bè của bạn</h2>
      </div>
      <div class="col">
        <h2 style="color: #8c8c8c" class="a1 a2">Người lạ</h2>
      </div>
    </div>
    <div class="col" id="scroll2">
      <div class="col">
        <div class="row" (click)="createConversation(list?.id)" *ngFor="let list of listFriend"
             style="{{border}}; border-radius: 5px; margin-top: 5px">
          <img class="imageListAvatarMessage"
               src="{{list?.avatar}}">
          <h2 class="a1 a2" matTooltip="Ấn để trò truyện" (click)="openMessage()"
              style="margin-top: 15px">{{list?.fullName}}</h2>
          <span style="color: #0a70b9" class="material-icons">textsms</span>
        </div>
      </div>
    </div>
  </div>
  <div class="col">
    <div class="row">
      <div class="col">
        <h2 *ngIf="idUserLogIn != userName?.id">{{withUser}} {{userName?.fullName}}</h2>
        <h2 *ngIf="idUserLogIn == userName?.id">{{withUser}} {{userName1?.fullName}}</h2>
      </div>
      <div class="col" align="right">
        <sub><span matTooltip="Màu nền mặc định" style="color: #eee1e1" (click)="changeBackgroundColor4()"
                   class="a1 material-icons">radio_button_checked
          </span></sub>
        <sub><span matTooltip="Đổi màu nền" style="color: pink" (click)="changeBackgroundColor1()"
                   class="a1 material-icons">radio_button_checked
          </span></sub>
        <sub><span matTooltip="Đổi màu nền" style="color: #afd9ee" (click)="changeBackgroundColor2()"
                   class="a1 material-icons">radio_button_checked
          </span></sub>
        <sub><span matTooltip="Đổi màu nền" style="color: #1deecf" (click)="changeBackgroundColor3()"
                   class="a1 material-icons">radio_button_checked
          </span></sub>
      </div>
    </div>
    <div class="row">
      <div class="col-{{withMessage}}">
        <div *ngIf="checkConversation" style="{{border}}; border-radius: 5px">
          <div style="background-color: #5bc0de; border: #b2dba1 1px solid; height: 65px">
            <img *ngIf="idUserLogIn != conversation?.idReceiver?.id && conversation != null"
                 routerLink="/user/people-detail/{{conversation?.idReceiver?.id}}" class="imgFix a1"
                 style="margin-left: 10px" matTooltip="Xem trang cá nhân"
                 src="{{conversation?.idReceiver?.avatar}}">
            <img *ngIf="idUserLogIn == conversation?.idReceiver?.id && conversation != null"
                 class="imgFix" style="margin-left: 10px"
                 src="{{conversation?.idSender?.avatar}}">
            <span *ngIf="count > 0" style="color: red;" class="material-icons">announcement</span>
            <span *ngIf="conversation != null" (click)="closeMessage()"
                  style="float: right; margin-top: 1px"
                  matTooltip="Đóng" class="color-whitesmoke a1 a2 material-icons">close</span>
            <span *ngIf="conversation != null && !checkOpenInfo" class="color-whitesmoke a1 a2 material-icons"
                  style="float: right; font-size: 27px" (click)="openInfo()"
                  matTooltip="Thông tin hội thoại">last_page</span>
          </div>
          <div>
            <div style="border: #b2dba1 1px solid;{{background}}" #scrollMe [scrollTop]="scrollMe.scrollHeight"
                 id="scroll" class="col">
              <div style="margin-top: 215px" align="center" *ngIf="count == 0">
                <img *ngIf="conversation != null" class="imgFix" src="{{conversation?.idReceiver?.avatar}}">
                <p style="font-size: 15px; margin-top: 10px">Friend Finder</p>
                <p *ngIf="conversation != null" style="font-size: 15px">Sống
                  tại {{conversation?.idReceiver?.address}}</p>
              </div>
              <div *ngFor="let mes of messengers">
                <div class="row" *ngIf="idUserLogIn == mes?.idSender?.id">
                  <div class="col-1">
                    <img align="left" class="imgFix"
                         src="{{mes?.idSender?.avatar}}">
                  </div>
                  <div class="col-11">
                    <h2 align="left" style="margin-top: 10px;">
                  <span class="messageContentLeft" *ngIf="mes?.content != ''">
                    {{mes?.content}}</span>
                    </h2>
                    <img align="left" class="imageMessage"
                         *ngIf="mes?.image != '' && mes?.image != null"
                         src="{{mes?.image}}">
                  </div>
                </div>
                <div class="row" *ngIf="idUserLogIn != mes?.idSender?.id">
                  <div class="col-11">
                    <h2 align="right" style="margin-top: 10px;">
                      <span class="messageContentRight"
                            *ngIf="mes?.content != ''">
                           {{mes?.content}}</span>
                    </h2>
                    <img align="right" class="imageMessage"
                         *ngIf="mes?.image != '' && mes?.image != null"
                         src="{{mes?.image}}">
                  </div>
                  <div class="col-1">
                    <img align="right" class="imgFix"
                         src="{{mes?.idSender?.avatar}}">
                  </div>
                </div>
              </div>
            </div>
            <div>
              <form [formGroup]="messengerForm"
                    (ngSubmit)="createMessenger(conversation?.id)">
                <div class="row" style="margin-top: 20px">
                  <div class="col-8">
                    <input
                      style="width: 100% !important; height: 60px; font-size: 18px; margin-left: 5px; border: #c0a16b 1px solid"
                      onfocus="this.value=''" type="text"
                      class="form-control c1 i1" formControlName="content"
                      placeholder="Aa">
                  </div>
                  <div class="col-1">
                    <sup *ngIf="conversation != null">
                  <span matTooltip="Tải ảnh lên" style="font-size: 73px; color: #196d86" #userPhoto
                        (change)="onFileSelected($event)"
                        class="a1 material-icons btn-file">image
                   <input type="file" name="image" autocomplete="off" class="a1 form-control"></span>
                    </sup>
                    <sup *ngIf="conversation == null">
                  <span matTooltip="Tải ảnh lên" style="font-size: 73px; color: #d9e3e7" #userPhoto
                        class="a1 material-icons btn-file">image
                   </span>
                    </sup>
                  </div>
                  <div class="col">
                    <button *ngIf="conversation != null && checkButton" class="width-96-percent"
                            style="height: 60px; font-size: 18px" mat-raised-button color="accent"
                            type="summit">Gửi
                    </button>
                    <div style="margin-left: 60px; margin-top: 10px" *ngIf="checkDone">
                      <mat-spinner [diameter]="30"></mat-spinner>
                      <span>Đang tải ảnh</span>
                    </div>
                    <button *ngIf="conversation == null" disabled class="width-96-percent"
                            style="height: 60px; font-size: 18px" mat-raised-button color="accent"
                            type="summit">Gửi
                    </button>
                  </div>
                </div>
                <div>
                  <div class="row">
                    <div class="col-8">
                      <span style="margin-left: 10px">Tối đa 120 kí tự.</span>
                    </div>
                    <div class="col-3">
                      <div *ngIf="fb != null">
                        <img class="imageUploadSmall"
                             style="margin-left: 11px"
                             src="{{fb}}" alt="">
                        <span class="font-size-15" style="margin-left: 40px">Ảnh đã tải lên</span>
                      </div>
                    </div>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
      <div *ngIf="!checkConversation" class="col-{{withMessage}}">
        <div style=" height: 640px;{{border}}; border-radius: 5px">
          <div style="background-color: #5bc0de; border: #b2dba1 1px solid; height: 65px">
            <span style="color: red;" class="material-icons">announcement</span>
            <span style="color: whitesmoke; float: right" class="material-icons">close</span>
          </div>
          <div>
            <div style="border: #b2dba1 1px solid;{{background}}"
                 class="col">
              <div style="margin-top: 215px; height: 358px" align="center">
                <p style="font-size: 15px; margin-top: 10px">Friend Finder</p>
                <p class="a1 a2" (click)="openMessage()" style="font-size: 15px; margin-top: 10px; color: #0a70b9">
                  Ấn để mở cuộc trò chuyện</p>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-{{withInfo}}" style="background-color: #e7e7e7">
        <div *ngIf="checkOpenInfo">
          <div class="row" style="height: 60px">
            <span matTooltip="Đóng cửa sổ" (click)="closeInfo()"
                  style="font-size: 26px; color: #5bc0de; margin-top: 2px"
                  class="a1 a2 material-icons">first_page</span>
            <h2 style="margin-left: 20px;">Thông tin hội thoại</h2>
          </div>
          <div style="margin-top: 5px">
            <div class="row" style="height: 5px; background-color: white"></div>
            <div class="row" style="margin-top: 10px">
              <p style="margin-left: 10px">Ảnh&nbsp;
                <sub>
                  <span style="font-size: 15px" class="material-icons">perm_media</span>
                </sub>
              </p>
              <div class="col">
                <div class="row" id="scroll3">
                  <div style="margin-left: 5px; margin-right: 5px; margin-bottom: 5px" class="col-3"
                       *ngFor="let mesP of messengersHavePhoto">
                    <img
                      style="width: 50px; height: 50px; border-radius: 5px"
                      src="{{mesP?.image}}">
                  </div>
                </div>
              </div>
            </div>
            <div class="row" style="height: 5px; background-color: white"></div>
            <div style="margin-top: 10px">
              <p>Link&nbsp;
                <sub>
                  <span style="font-size: 15px" class="material-icons">language</span>
                </sub>
              </p>
              <div style="margin-left: 5px">
                <div *ngFor="let mesL of messengersHaveLink">
                  <li>
                    <a style="width: 100%" href="{{mesL}}" target="_bank" class="break-word a1 a2">{{mesL}}</a>
                  </li>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
